account_id: ""
project_slug: "sparklend"
actions:
  phoenixlabs/sparklend:
    runtime: v1
    sources: actions
    specs:
      monitor-user-health:
        description: Checks user's health factors after they interact with the protocol.
        function: src/getUserInfo:getUserInfoSparkLend
        trigger:
          type: transaction
          transaction:
            status:
              - mined
            filters:
              # Transaction must be from the network with network ID 1 (mainnet)
              - network: 1
                # Transaction must have failed
                status: success
                # Transaction must have been sent to Pool address
                to: 0xC13e21B648A5Ee794902342038FF3aDAB66BE987

      monitor-user-health-aave:
        description: Checks Aave user's health factors after they interact with the protocol.
        function: src/getUserInfo:getUserInfoAave
        trigger:
          type: transaction
          transaction:
            status:
              - mined
            filters:
              # Transaction must be from the network with network ID 1 (mainnet)
              - network: 1
                # Transaction must have failed
                status: success
                # Transaction must have been sent to Pool address
                to: 0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2

      monitor-asset-liabilities:
        description: Checks asset liability matching for each reserve.
        function: src/getAllReservesAssetLiability:getAllReservesAssetLiabilitySparkLend
        trigger:
          type: block
          block:
            network:
              - 1
            blocks: 5

      monitor-asset-liabilities-aave:
        description: Checks asset liability matching for each reserve in Aave protocol.
        function: src/getAllReservesAssetLiability:getAllReservesAssetLiabilityAave
        trigger:
          type: block
          block:
            network:
              - 1
            blocks: 5

      monitor-protocol-interactions:
        description: Monitors interactions with the Sparklend protocol that involve funds of amounts at least $1.000.000 worth of assets
        function: src/getProtocolInteractionSparkLend:getProtocolInteractionSparkLend
        trigger:
          type: alert
          alert: {}

      monitor-aave-config-changes:
        description: Reports changes to the Aave V3 protocol
        function: src/getConfigurationChangeAave:getConfigurationChangeAave
        trigger:
          type: alert
          alert: {}
